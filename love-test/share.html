<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê³µìœ í•˜ê¸°</title>
    
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1219204287783717"
         crossorigin="anonymous"></script>
    
    <style>
        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow-x: hidden;
            font-family: 'Segoe UI', Tahoma, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }
        
        .share-container {
            background: white;
            border-radius: 20px;
            padding: 40px 30px;
            max-width: 500px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            text-align: center;
        }
        
        .emoji {
            font-size: 4em;
            margin-bottom: 20px;
            animation: spin 2s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        h1 {
            color: #764ba2;
            font-size: 1.8em;
            margin-bottom: 15px;
        }
        
        .message {
            color: #666;
            font-size: 1.1em;
            line-height: 1.6;
            margin-bottom: 30px;
        }
        
        .countdown {
            font-size: 3em;
            color: #764ba2;
            font-weight: bold;
            margin: 20px 0;
        }
        
        /* ê´‘ê³  ì˜ì—­ */
        .ad-area {
            margin: 30px 0;
            min-height: 280px;
            display: flex;
            justify-content: center;
            align-items: center;
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
        }
        
        .skip-btn {
            display: none;
            margin-top: 20px;
            padding: 12px 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 25px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .skip-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }
        
        .skip-btn.visible {
            display: inline-block;
        }
        
        @media (max-width: 600px) {
            .share-container {
                padding: 30px 20px;
            }
            
            h1 {
                font-size: 1.5em;
            }
            
            .emoji {
                font-size: 3em;
            }
            
            .countdown {
                font-size: 2.5em;
            }
        }
    </style>
</head>
<body>
    <div class="share-container">
        <div class="emoji">ğŸ’•</div>
        <h1>ê³µìœ  ì¤€ë¹„ ì¤‘...</h1>
        <p class="message">ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”<br>ê³§ ê³µìœ ê°€ ì‹œì‘ë©ë‹ˆë‹¤</p>
        
        <div class="countdown" id="countdown">5</div>
        
        <!-- ê´‘ê³  ì˜ì—­ -->
        <div class="ad-area">
            <ins class="adsbygoogle"
                 style="display:block; width:100%; min-height:250px;"
                 data-ad-client="ca-pub-1219204287783717"
                 data-ad-slot="2267160593"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>
        </div>
        
        <button class="skip-btn" id="skipBtn" onclick="skipAndShare()">
            ê±´ë„ˆë›°ê³  ê³µìœ í•˜ê¸° â†’
        </button>
    </div>

    <script>
        // ê´‘ê³  ë¡œë“œ
        (adsbygoogle = window.adsbygoogle || []).push({});
        
        const results = {
            "ESTJ": { emoji: "ğŸ¦", title: "ë“ ë“ í•œ ì‚¬ìí˜•" },
            "ESFJ": { emoji: "ğŸ¶", title: "ë‹¤ì •í•œ ê°•ì•„ì§€í˜•" },
            "ISTJ": { emoji: "ğŸ˜", title: "ì„±ì‹¤í•œ ì½”ë¼ë¦¬í˜•" },
            "ISFJ": { emoji: "ğŸ¨", title: "í¬ê·¼í•œ ì½”ì•Œë¼í˜•" },
            "ESTP": { emoji: "ğŸ†", title: "ì§œë¦¿í•œ ì¹˜íƒ€í˜•" },
            "ESFP": { emoji: "ğŸ¬", title: "ì‹ ë‚˜ëŠ” ëŒê³ ë˜í˜•" },
            "ISTP": { emoji: "ğŸº", title: "ì¿¨í•œ ëŠ‘ëŒ€í˜•" },
            "ISFP": { emoji: "ğŸ¦Œ", title: "ì˜¨í™”í•œ ì‚¬ìŠ´í˜•" },
            "ENTJ": { emoji: "ğŸ¦…", title: "ë‹¹ë‹¹í•œ ë…ìˆ˜ë¦¬í˜•" },
            "ENFJ": { emoji: "ğŸ¦‹", title: "ë§¤ë ¥ì ì¸ ë‚˜ë¹„í˜•" },
            "INTJ": { emoji: "ğŸ¦‰", title: "ì§€í˜œë¡œìš´ ì˜¬ë¹¼ë¯¸í˜•" },
            "INFJ": { emoji: "ğŸ¦Š", title: "ì‹ ë¹„ë¡œìš´ ì—¬ìš°í˜•" },
            "INTP": { emoji: "ğŸ±", title: "ììœ ë¡œìš´ ê³ ì–‘ì´í˜•" },
            "INFP": { emoji: "ğŸ°", title: "ë¡œë§¨í‹± í† ë¼í˜•" },
            "ENTP": { emoji: "ğŸ¦Š", title: "ì¬ì¹˜ìˆëŠ” ì—¬ìš°í˜•" },
            "ENFP": { emoji: "ğŸµ", title: "ë°œë„í•œ ì›ìˆ­ì´í˜•" }
        };

        // URL íŒŒë¼ë¯¸í„°
        const urlParams = new URLSearchParams(window.location.search);
        const mbtiType = urlParams.get('type');
        const platform = urlParams.get('platform');

        // ì¹´ìš´íŠ¸ë‹¤ìš´
        let countdown = 5;
        const countdownEl = document.getElementById('countdown');
        const skipBtn = document.getElementById('skipBtn');
        
        const timer = setInterval(() => {
            countdown--;
            countdownEl.textContent = countdown;
            
            // 3ì´ˆ í›„ ê±´ë„ˆë›°ê¸° ë²„íŠ¼ í‘œì‹œ
            if (countdown <= 2) {
                skipBtn.classList.add('visible');
            }
            
            if (countdown <= 0) {
                clearInterval(timer);
                executeShare();
            }
        }, 1000);

        function skipAndShare() {
            clearInterval(timer);
            executeShare();
        }

        function executeShare() {
            const baseUrl = window.location.origin + window.location.pathname.replace('share.html', '');
            const shareUrl = baseUrl + '?type=' + mbtiType;
            const result = results[mbtiType];

            if (!result) {
                window.location.href = baseUrl;
                return;
            }

            if (platform === 'kakao') {
                const shareText = `ë‚˜ëŠ” ${result.emoji} ${result.title}!\n\në‚˜ì˜ ì—°ì•  ìŠ¤íƒ€ì¼ í…ŒìŠ¤íŠ¸ ê²°ê³¼ë¥¼ í™•ì¸í•´ë³´ì„¸ìš” ğŸ’•`;
                
                if (navigator.share) {
                    navigator.share({
                        title: 'ë‚˜ì˜ ì—°ì•  ìŠ¤íƒ€ì¼ í…ŒìŠ¤íŠ¸',
                        text: shareText,
                        url: shareUrl
                    }).then(() => {
                        window.location.href = shareUrl;
                    }).catch(() => {
                        copyToClipboard(shareUrl);
                        alert('ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆì–´ìš”! ì¹´ì¹´ì˜¤í†¡ì—ì„œ ê³µìœ í•´ì£¼ì„¸ìš” ğŸ’•');
                        window.location.href = shareUrl;
                    });
                } else {
                    copyToClipboard(shareUrl);
                    alert('ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆì–´ìš”! ì¹´ì¹´ì˜¤í†¡ì—ì„œ ê³µìœ í•´ì£¼ì„¸ìš” ğŸ’•');
                    window.location.href = shareUrl;
                }
            } else if (platform === 'facebook') {
                const facebookUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(shareUrl)}`;
                window.open(facebookUrl, '_blank', 'width=600,height=400');
                setTimeout(() => {
                    window.location.href = shareUrl;
                }, 1000);
            } else if (platform === 'twitter') {
                const shareText = `ë‚˜ëŠ” ${result.emoji} ${result.title}!\n\në‚˜ì˜ ì—°ì•  ìŠ¤íƒ€ì¼ì€?`;
                const twitterUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(shareText)}&url=${encodeURIComponent(shareUrl)}`;
                window.open(twitterUrl, '_blank', 'width=600,height=400');
                setTimeout(() => {
                    window.location.href = shareUrl;
                }, 1000);
            } else if (platform === 'link') {
                copyToClipboard(shareUrl);
                alert('âœ… ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆì–´ìš”!');
                window.location.href = shareUrl;
            } else {
                window.location.href = shareUrl;
            }
        }

        function copyToClipboard(text) {
            if (navigator.clipboard) {
                navigator.clipboard.writeText(text);
            } else {
                const textarea = document.createElement('textarea');
                textarea.value = text;
                textarea.style.position = 'fixed';
                textarea.style.opacity = '0';
                document.body.appendChild(textarea);
                textarea.select();
                document.execCommand('copy');
                document.body.removeChild(textarea);
            }
        }
    </script>
</body>
</html>
